<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Unihouser — Dashboard</title>
<link rel="stylesheet" href="css/style.css">

<style>
/* ===== Tema claro SOLO para este dashboard ===== */
.theme-light{
  --bg:#ffffff; --card:#ffffff; --text:#111827; --muted:#667085; --border:#e5e7eb;
  --accent:#ff6a3d; --ok:#16a34a; --warn:#f59e0b; --bad:#ef4444;
  background:#fff; color:var(--text);
}
.theme-light .topbar{ background:#fff; border-bottom:1px solid var(--border); }
.theme-light .container{ background:transparent; }
.theme-light h1,.theme-light h2,.theme-light h3,.theme-light h4{ color:#101828; }
.theme-light label, .theme-light small.hint{ color:var(--muted); }
.theme-light input, .theme-light select{ background:#fff; color:#101828; border:1px solid var(--border); }
.theme-light .btn{ background:#f9fafb; border:1px solid var(--border); color:#101828; }
.theme-light .btn.primary{ background:var(--accent); color:#fff; border-color:transparent; }
.theme-light .btn.ghost{ background:#fff; border:1px solid var(--border); color:#101828; }
.theme-light .btn:hover{ box-shadow:0 1px 2px rgba(16,24,40,.06); }
.theme-light .card,.theme-light .kpi-card,.theme-light .column,.theme-light .card-mini{
  background:#fff; border:1px solid var(--border); box-shadow:0 1px 2px rgba(16,24,40,.04);
}
.theme-light .badge{ background:#f2f4f7; color:#344054; border:1px solid #e4e7ec; }
.theme-light .tag{ background:#f9fafb; color:#344054; border:1px solid #e5e7eb; }
.theme-light .table{ background:#fff; border:1px solid var(--border); }
.theme-light .table th{ background:#f9fafb; color:#344054; border-bottom:1px solid var(--border); }
.theme-light .table td{ border-bottom:1px solid #f2f4f7; }
.theme-light .table tr:last-child td{ border-bottom:none; }
.theme-light .nav a.active{ background:rgba(255,106,61,.12); color:#8a3410; border-radius:10px; padding:8px 10px; }

/* Título uniforme */
.page-header{ margin:18px 0 10px; }
.page-title{ font-size:1.8rem; font-weight:600; color:#101828; margin:0; }

/* Layout específico */
.kpi-grid{display:grid;gap:12px;grid-template-columns:repeat(2,1fr)}
@media(min-width:920px){.kpi-grid{grid-template-columns:repeat(6,1fr)}}
.kpi-card .lab{font-size:12px;color:var(--muted)}
.kpi-card .val{font-size:22px;font-weight:800;margin-top:4px}

.filter-bar{display:grid;gap:10px;grid-template-columns:1fr}
@media(min-width:900px){.filter-bar{grid-template-columns:1.2fr .8fr .8fr 1fr .8fr .6fr}}
.filter-bar .btn{height:44px}

.kanban{display:grid;gap:12px;grid-template-columns:1fr}
@media(min-width:1100px){.kanban{grid-template-columns:repeat(5,1fr)}}
.column{border-radius:14px;min-height:240px;padding:8px}
.column h4{margin:2px 6px 8px;color:#344054}
.card-mini{border-radius:12px;padding:10px;margin:6px 4px}
.actions-row{display:flex;gap:8px;margin-top:8px}
.icon-btn{background:#f9fafb;border:1px solid var(--border);border-radius:10px;padding:8px;cursor:pointer}
.icon-btn:hover{border-color:#d0d5dd}
.badge{display:inline-block;padding:3px 8px;border-radius:999px;font-weight:700;font-size:12px}
.tags{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.tag{border-radius:999px;padding:2px 8px;font-size:12px}

.drawer{position:fixed;right:0;top:0;bottom:0;width:420px;max-width:92vw;background:var(--card);
  border-left:1px solid var(--border);box-shadow:0 10px 24px rgba(0,0,0,.12);transform:translateX(100%);
  transition:.25s;z-index:50}
.drawer.open{transform:translateX(0)}
.drawer-header{display:flex;justify-content:space-between;align-items:center;padding:14px;border-bottom:1px solid var(--border)}
.drawer-body{padding:14px}
.pills{display:flex;gap:8px;flex-wrap:wrap}
.pill{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:#f9fafb;color:#344054}

/* bolitas estado objetivo */
.dot{display:inline-block;width:10px;height:10px;border-radius:50%;vertical-align:middle;margin-left:6px}
.dot.green{background:var(--ok)} .dot.amber{background:var(--warn)} .dot.red{background:var(--bad)} .dot.gray{background:#d0d5dd}
</style>
</head>

<body class="theme-light">
<header class="topbar">
  <div class="container flex between center">
    <div class="brand flex center"><div class="title">Unihouser — CRM & BuyBox</div></div>
    <nav class="nav">
      <a href="evaluar.html">Evaluar</a>
      <a href="evaluaciones.html">Evaluaciones</a>
      <a href="prospectos.html">Prospectos</a>
      <a href="dashboard.html" class="active">Dashboard</a>
      <a href="configuracion.html">Configuración</a>
    </nav>
  </div>
</header>

<main class="container">

  <div class="page-header"><h1 class="page-title">Dashboard</h1></div>

  <!-- KPIs -->
  <section class="kpi-grid">
    <div class="kpi-card"><div class="lab">Prospectos activos</div><div class="val" id="k_total">—</div></div>
    <div class="kpi-card"><div class="lab">Contacto</div><div class="val" id="k_contacto">—</div></div>
    <div class="kpi-card"><div class="lab">Reunión</div><div class="val" id="k_reunion">—</div></div>
    <div class="kpi-card"><div class="lab">Búsqueda</div><div class="val" id="k_busqueda">—</div></div>
    <div class="kpi-card"><div class="lab">Compraventa</div><div class="val" id="k_compra">—</div></div>
    <div class="kpi-card"><div class="lab">Notaría</div><div class="val" id="k_notaria">—</div></div>
  </section>

  <!-- Filtros -->
  <section class="card" style="margin-top:12px">
    <h2 style="margin:0 0 10px">Filtros</h2>
    <div class="filter-bar">
      <div class="field"><label>Buscar</label><input id="f_q" placeholder="Nombre, email o teléfono"></div>
      <div class="field"><label>Fase</label>
        <select id="f_fase">
          <option value="">Todas</option>
          <option value="CONTACTO">Contacto</option>
          <option value="REUNION">Reunión</option>
          <option value="BUSQUEDA">Búsqueda</option>
          <option value="COMPRAVENTA">Compraventa</option>
          <option value="NOTARIA">Notaría</option>
        </select>
      </div>
      <div class="field"><label>Tipo</label>
        <select id="f_tipo"><option value="">Todos</option><option>Tradicional</option><option>Habitaciones</option></select>
      </div>
      <div class="field"><label>Localidades contiene</label><input id="f_loc" placeholder="Oviedo, Gijón…"></div>
      <div class="field"><label>Financiación</label>
        <select id="f_fin"><option value="">Todas</option><option>Sí</option><option>No</option></select>
      </div>
      <div class="actions">
        <button class="btn" id="f_clear" type="button">Limpiar</button>
        <button class="btn primary" id="f_apply" type="button">Filtrar</button>
      </div>
    </div>
  </section>

  <!-- Kanban (rellena JS) -->
  <section class="kanban" id="kanban">
    <div class="column" data-col="CONTACTO"><h4>Contacto</h4></div>
    <div class="column" data-col="REUNION"><h4>Reunión</h4></div>
    <div class="column" data-col="BUSQUEDA"><h4>Búsqueda</h4></div>
    <div class="column" data-col="COMPRAVENTA"><h4>Compraventa</h4></div>
    <div class="column" data-col="NOTARIA"><h4>Notaría</h4></div>
  </section>

  <!-- Tabla -->
  <section class="table-wrap card">
    <h2 style="margin:0 0 10px">Listado</h2>
    <table class="table" id="tab">
      <thead><tr>
        <th>Nombre</th><th>Email</th><th>Teléfono</th>
        <th>Fase</th><th>Subestado</th><th>Tipo</th>
        <th>Localidades</th><th>Objetivo</th><th>Presupuesto</th><th>Acciones</th>
      </tr></thead>
      <tbody id="tbody">
        <tr><td colspan="10" style="text-align:center;color:var(--muted)">Sin datos (se rellenará desde Prospectos)</td></tr>
      </tbody>
    </table>
  </section>
</main>

<!-- Drawer lateral -->
<aside class="drawer" id="drawer">
  <div class="drawer-header">
    <strong id="dv_nombre">Prospecto</strong>
    <button class="btn" id="dv_close">Cerrar</button>
  </div>
  <div class="drawer-body">
    <div class="pills" style="margin-bottom:10px">
      <div class="pill" id="dv_fase">Fase: —</div>
      <div class="pill" id="dv_tipo">Tipo: —</div>
      <div class="pill" id="dv_obj">Objetivo: —</div>
    </div>
    <div class="field"><label>Email</label><input id="dv_email" disabled></div>
    <div class="field"><label>Teléfono</label><input id="dv_tel" disabled></div>
    <div class="field"><label>Localidades</label><input id="dv_locs" disabled></div>
    <div class="actions" style="margin-top:12px">
      <button class="btn" id="dv_email_btn">Email</button>
      <button class="btn" id="dv_whatsapp_btn">WhatsApp</button>
      <button class="btn primary" id="dv_adv_btn">Avanzar fase</button>
    </div>
  </div>
</aside>

<footer class="foot"><div class="container foot-inner">© 2025 Unihouser · unihouser.es · info@unihouser.es · 644 300 200</div></footer>

<script defer src="js/app.js"></script>
<script defer src="js/dashboard.js"></script>
</body>
</html>
